<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
                template="./WEB-INF/templates/principalTemplate.xhtml"
                xmlns:p="http://primefaces.org/ui"
                xmlns:f="http://xmlns.jcp.org/jsf/core"
                xmlns:h="http://xmlns.jcp.org/jsf/html">
    <link href="resources/css/estilos.css" rel="stylesheet" type="text/css"/>
    <ui:define name="content">
        <h:form id="frmHome">
            <p:messages id="mesagge"/>  
        <div class="ui-g">
                 <div class="ui-g-12 ui-md-3" style=" "> 
                 </div>
                <div class="ui-grid-responsive" style="background-color: blue">
                     <p:galleria  value="#{galeriaBean.images}" var="image" panelWidth="1000" panelHeight="300" style=" "  showCaption="true" autoPlay="true">
                          <p:graphicImage cache="true" name="images/home/#{image}" alt="Image Description for #{image}" title="#{image}"/>
                     </p:galleria>
                </div>
                 <div class="ui-g-12 ui-md-2 ui-g-nopad" style=" ">
                    <!--<p:graphicImage cache="true" name="images/oferta.jpg" alt="Image Description for " title="lol" width="400" height="600"/>-->
                    <p:dataList value="#{ventaFormBean.listaDeVentasProductos}" var="venPro" type="definition">
                    <f:facet name="header">
                        Carrito
                    </f:facet>
                        Producto: #{venPro.producto.nombre}, Cantidad: #{venPro.cantidad}, Precio por unidad #{venPro.producto.precio}, Precio Tatal #{venPro.importe}, canttt #{ventaFormBean.cant}
                    <f:facet name=" ">
                        <p:graphicImage name="images/Cocina/#{venPro.producto.imagenProducto}.jpg"/> 
                    </f:facet>
                </p:dataList>
                 </div>
        </div>
       
       <p:carousel value="#{productoFormBean.listaDeProductosCocina}" headerText="Responsive" var="prod" itemStyle="text-align:center" responsive="true">
        <p:panelGrid columns="2" style="width:100%;margin:0px 0px" columnClasses="label,value" layout="grid" styleClass="ui-panelgrid-blank">
            <f:facet name="header">
          <!--      <p:commandLink actionListener="" > -->
                    <p:graphicImage name="images/Cocina/#{prod.imagenProducto}.jpg" width="200" height="200"/>
              <!--  </p:commandLink>-->
            </f:facet>
            
            <h:outputText value="Precio" />
            <h:outputText value="#{prod.precio}" />
 
            <h:outputText value="Marca:" />
            <h:outputText value="#{prod.marca} "/>
  
            
            <f:facet name="footer">
                <p:commandButton value="comprar" update="frmHome:mesagge"   oncomplete="PF('cantidad').show()" />
                      </f:facet>
             <p:dialog id="dlgCantidad" widgetVar="cantidad" modal="true" resizable="false" header="Cantidad"  showEffect="explode" hideEffect="bounce" height="300">
                        
                            <p:panelGrid columns="2">
                                <p:outputLabel  value="Codigo" id="lblCodigo"/>
                                <p:inputNumber id="txtCodigo" value="#{ventaFormBean.cant}" ></p:inputNumber>
                                <p:commandButton value="Aceptar" actionListener="#{ventaFormBean.crearVentaProducto(prod)}" update="frmHome:mesagge,frmHome , :frmCarrito:d" icon="fa-cart-plus" oncomplete="PF('cantidad').hide()"/>

                                                 
                                </p:panelGrid>
                                    

                    </p:dialog>                
            </p:panelGrid>
         </p:carousel>
            
        <p:carousel value="#{productoFormBean.listaDeProductosColchones}" headerText="Aprovecha Nuestros Descuentos" var="col" itemStyle="text-align:center" responsive="true">
        <p:panelGrid columns="2" style="width:100%;margin:10px 0px" columnClasses="label,value" layout="grid" styleClass="ui-panelgrid-blank">
            <f:facet name="header">
                <p:graphicImage name="images/Colchones y Somier/#{col.imagenProducto}.jpg" width="200" height="200"/> 
            </f:facet>
            
 
            <h:outputText value="Precio:" />
            <h:outputText value="#{col.precio}" />
 
            <h:outputText value="marca" />
            <h:outputText value="#{col.marca}" />
            <f:facet name="footer">
                <p:commandButton value="Comprar "></p:commandButton>
            </f:facet>
            </p:panelGrid>
         </p:carousel>
       
        
  </h:form>
              
            <h:form id="frmCarrito">
            <p:panel style="text-align: center">
                Carrito de Compras
            </p:panel>
            <!--Productos Agregados al carrito de Compras-->
            <p:dataTable  id="d" var="pro" value="#{ventaFormBean.listaDeVentasProductos}"
                         >
                <f:facet name="header">
                    PRODUCTOS
                </f:facet>
                
                <p:column headerText="Producto">
                    <h:outputText value="#{pro.producto.nombre}" />
                </p:column>

                <p:column headerText="Precio">
                    <h:outputText value="#{pro.producto.precio}" />
                </p:column>

                <p:column headerText="Cantidad">
                    <h:outputText value="#{pro.cantidad}" />
                </p:column>
                
                <p:column headerText="Importe">
                    <h:outputText value="#{pro.importe}" />
                </p:column>
                
                <p:column headerText="Opciones">
                     <p:commandButton icon="ui-icon-trash" actionListener="#{ventaFormBean.quitarProductoDelCarrito(pro)}"
                                     update="frmCarrito"/>
                </p:column>
            </p:dataTable>
            <!--Total de la compra-->
            <p:panel id="PnlTotalCarrito" header="TOTAL DEL CARRITO" style="margin-top: 10px;margin-bottom:10px;margin-left: 500px;width: 400px">
                <h:panelGrid columns="2" cellpadding="10">
                    <p:outputLabel value="Total:"/>
                    <p:inputNumber value="#{ventaFormBean.calcularImporteDelCarrito()}"/>
                    <p:commandButton value="CONFIRMAR COMPRA" actionListener="#{ventaFormBean.crearNuevaVenta()}"
                                     action="finalizarCompra"/>
                    <p:commandButton value="Salir" action="home"/>
                </h:panelGrid>
            </p:panel>

        </h:form>
  
   
    </ui:define>
</ui:composition>
